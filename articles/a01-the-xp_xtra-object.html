<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>The extended xpose data object • xpose.xtras</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The extended xpose data object">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xpose.xtras</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01-the-xp_xtra-object.html">The extended xpose data object</a></li>
    <li><a class="dropdown-item" href="../articles/a02-xpose-sets.html">Using xpose sets</a></li>
    <li><a class="dropdown-item" href="../articles/a03-useful_plots.html">Useful uncommon plots</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jprybylski/xpose.xtras/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>The extended xpose data object</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jprybylski/xpose.xtras/blob/CRAN-0.0.3/vignettes/a01-the-xp_xtra-object.Rmd" class="external-link"><code>vignettes/a01-the-xp_xtra-object.Rmd</code></a></small>
      <div class="d-none name"><code>a01-the-xp_xtra-object.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-to-get-the-object">How to get the object<a class="anchor" aria-label="anchor" href="#how-to-get-the-object"></a>
</h2>
<p>The <code>xpose_data</code> object (aka: <code>xpdb</code>) gets a
few extensions in this package. Many of these are added to accommodate
new plots and features, but in most cases these features are
cross-compatible with a typical <code>xpose_data</code> object as well.
The extended version of <code>xpose_data</code> has the class
<code>xp_xtra</code>, and is also referred to as
<code>xpdb_x</code>.</p>
<p>Conversion of an <code>xpose_data</code> object is simple.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">xpdb_converted</span> <span class="op">&lt;-</span> <span class="va">xpdb_ex_pk</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/xp_xtras.html">as_xpdb_x</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To verify:</span></span>
<span><span class="va">xpdb_ex_pk</span></span>
<span><span class="co">#&gt; run001.lst overview: </span></span>
<span><span class="co">#&gt;  - Software: nonmem 7.3.0 </span></span>
<span><span class="co">#&gt;  - Attached files (memory usage 1.4 Mb): </span></span>
<span><span class="co">#&gt;    + obs tabs: $prob no.1: catab001.csv, cotab001, patab001, sdtab001 </span></span>
<span><span class="co">#&gt;    + sim tabs: $prob no.2: simtab001.zip </span></span>
<span><span class="co">#&gt;    + output files: run001.cor, run001.cov, run001.ext, run001.grd, run001.phi, run001.shk </span></span>
<span><span class="co">#&gt;    + special: &lt;none&gt; </span></span>
<span><span class="co">#&gt;  - gg_theme: theme_readable </span></span>
<span><span class="co">#&gt;  - xp_theme: theme_xp_default </span></span>
<span><span class="co">#&gt;  - Options: dir = data, quiet = FALSE, manual_import = NULL</span></span>
<span><span class="va">xpdb_converted</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #BB00BB; font-weight: bold;">~</span><span style="color: #BB00BB;"> xp_xtras</span> object </span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Model description</span>: NONMEM PK example for xpose</span></span>
<span><span class="co">#&gt; run001.lst overview: </span></span>
<span><span class="co">#&gt;  - Software: nonmem 7.3.0 </span></span>
<span><span class="co">#&gt;  - Attached files (memory usage 1.5 Mb): </span></span>
<span><span class="co">#&gt;    + obs tabs: $prob no.1: catab001.csv, cotab001, patab001, sdtab001 </span></span>
<span><span class="co">#&gt;    + sim tabs: $prob no.2: simtab001.zip </span></span>
<span><span class="co">#&gt;    + output files: run001.cor, run001.cov, run001.ext, run001.grd, run001.phi, run001.shk </span></span>
<span><span class="co">#&gt;    + special: &lt;none&gt; </span></span>
<span><span class="co">#&gt;  - gg_theme: theme_readable </span></span>
<span><span class="co">#&gt;  - xp_theme: xp_xtra_theme new_x$xp_theme </span></span>
<span><span class="co">#&gt;  - Options: dir = data, quiet = FALSE, manual_import = NULL, cvtype = exact</span></span></code></pre></div>
<p>As shown, there are some minor changes to the output for
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> to help confirm if an object is the extended
version. However, this is implemented merely as an S3 class, so all
<code>xpose</code> functions will continue to work with this new object;
the current package is also written in a way to work even if the
<code>xp_xtra</code> object loses that class.</p>
<p>Notably, there is no convenience function to read a model output
directly to an <code>xp_xtra</code> object, so all objects labelled as
<code>xp_xtra</code> start as <code>xpose_data</code>.</p>
<p>Many example <code>xp_xtra</code> objects are included in this
package, covering a variety of special cases.</p>
</div>
<div class="section level2">
<h2 id="what-features-are-available">What features are available?<a class="anchor" aria-label="anchor" href="#what-features-are-available"></a>
</h2>
<div class="section level3">
<h3 id="tidying-up">Tidying up<a class="anchor" aria-label="anchor" href="#tidying-up"></a>
</h3>
<p>It is by design that <code>xpose</code> attempts to align well with
the <code>tidyverse</code> family of R packages, so one focus of the
extension package is to make that alignment a bit more consistent. For
example, <code><a href="https://uupharmacometrics.github.io/xpose/reference/set_vars.html" class="external-link">xpose::set_var_types</a></code> accepts character vectors of
column names, but not tidyselection. As such, columns named in a
consistent and tidyselect-friendly way cannot be used to an advantage. A
minimal example can be seen below, but of course there are more complex
situations where this is convenient.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Unset all example covariates</span></span>
<span><span class="va">xpdb_ex_covs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xp_var.html">xp_var</a></span><span class="op">(</span><span class="va">xpdb_ex_pk</span>, type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"catcov"</span>,<span class="st">"contcov"</span><span class="op">)</span>, .problem<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">col</span><span class="op">)</span></span>
<span><span class="va">xpdb_ex_covs</span></span>
<span><span class="co">#&gt; [1] "MED1" "MED2" "SEX"  "AGE"  "CLCR" "WT"</span></span>
<span><span class="va">no_covs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_var_types.html">set_var_types</a></span><span class="op">(</span><span class="va">xpdb_ex_pk</span>, .problem<span class="op">=</span><span class="fl">1</span>, na <span class="op">=</span> <span class="va">xpdb_ex_covs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set_var_types on xpose_data objects uses xpose::set_var_types</span></span>
<span><span class="fu"><a href="../reference/set_var_types.html">set_var_types</a></span><span class="op">(</span><span class="va">no_covs</span>, .problem<span class="op">=</span><span class="fl">1</span>, catcov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MED1"</span>,<span class="st">"MED2"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/xp_var.html">xp_var</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"catcov"</span><span class="op">)</span>, .problem<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">col</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "MED1" "MED2"</span></span>
<span><span class="va">no_covs</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/xp_xtras.html">as_xpdb_x</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_var_types.html">set_var_types</a></span><span class="op">(</span>catcov <span class="op">=</span> <span class="fu">starts_with</span><span class="op">(</span><span class="st">"MED"</span><span class="op">)</span>, .problem<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/xp_var.html">xp_var</a></span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"catcov"</span><span class="op">)</span>, .problem<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">col</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "MED1" "MED2"</span></span></code></pre></div>
<p>Tidyselection is used fairly heavily in the <code>xpose.xtras</code>
package where it seems intuitive to include it. There are likely
functions that could use it but do not currently. As such, the
documentation does attempt to distinguish where <code>tidyselect</code>
is expected.</p>
</div>
<div class="section level3">
<h3 id="labels-units-and-also-levels">Labels, units and (also) levels<a class="anchor" aria-label="anchor" href="#labels-units-and-also-levels"></a>
</h3>
<p>Another feature includes a few visual confirmations of variable
units, labels and (new to this package) levels. In <code>xpose</code>,
users are able to add units and labels to any variable, which are stored
in the object and are theoretically used somewhere. This package
attempts to use these communication features more liberally in plots and
for the user, but broader implementation (some of which require changes
to existing <code>xpose</code> functions) is not complete just yet.</p>
<p>With labels and units, these are applied using the conventional
<code>xpose</code> functions. However, unlike in <code>xpose</code>,
these can be confirmed using <code><a href="../reference/list_vars.html">list_vars()</a></code> in
<code>xpose.xtras</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w_unit_labs</span> <span class="op">&lt;-</span> <span class="va">xpdb_x</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">set_var_labels</span><span class="op">(</span>AGE<span class="op">=</span><span class="st">"Age"</span>, MED1 <span class="op">=</span> <span class="st">"Digoxin"</span>, .problem <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">set_var_units</span><span class="op">(</span>AGE<span class="op">=</span><span class="st">"yrs"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/list_vars.html">list_vars</a></span><span class="op">(</span><span class="va">w_unit_labs</span>, .problem <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of available variables for problem no. 1</span></span>
<span><span class="co">#&gt;  - Subject identifier (id)               : ID</span></span>
<span><span class="co">#&gt;  - Dependent variable (dv)               : DV</span></span>
<span><span class="co">#&gt;  - Independent variable (idv)            : TIME</span></span>
<span><span class="co">#&gt;  - Dose amount (amt)                     : AMT</span></span>
<span><span class="co">#&gt;  - Event identifier (evid)               : EVID</span></span>
<span><span class="co">#&gt;  - Model typical predictions (pred)      : PRED</span></span>
<span><span class="co">#&gt;  - Model individual predictions (ipred)  : IPRED</span></span>
<span><span class="co">#&gt;  - Model parameter (param)               : KA, CL, V, ALAG1</span></span>
<span><span class="co">#&gt;  - Eta (eta)                             : ETA1, ETA2, ETA3</span></span>
<span><span class="co">#&gt;  - Residuals (res)                       : CWRES, IWRES, RES, WRES</span></span>
<span><span class="co">#&gt;  - Categorical covariates (catcov)       : SEX [<span style="color: #BBBB00;">0</span>], MED1<span style="font-weight: bold;"> ('Digoxin')</span> [<span style="color: #BBBB00;">0</span>], MED2 [<span style="color: #BBBB00;">0</span>]</span></span>
<span><span class="co">#&gt;  - Continuous covariates (contcov)       : CLCR, AGE<span style="font-weight: bold;"> ('Age', yrs)</span>, WT</span></span>
<span><span class="co">#&gt;  - Compartment amounts (a)               : A1, A2</span></span>
<span><span class="co">#&gt;  - Not attributed (na)                   : DOSE, SS, II, TAD, CPRED</span></span></code></pre></div>
<p>Levels can also be added to any variable, but can be especially
useful for categorical covariates (<code>catcov</code>) and categorical
DVs (type <code>catdv</code>, added by this package). The documentation
for <code><a href="../reference/set_var_levels.html">set_var_levels()</a></code> can be referenced for more information
about this, but the example below shows how this feature can be used and
checked.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w_levels</span> <span class="op">&lt;-</span> <span class="va">w_unit_labs</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_var_levels.html">set_var_levels</a></span><span class="op">(</span>SEX<span class="op">=</span><span class="fu"><a href="../reference/levelers.html">lvl_sex</a></span><span class="op">(</span><span class="op">)</span>, MED1 <span class="op">=</span> <span class="fu"><a href="../reference/levelers.html">lvl_bin</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/list_vars.html">list_vars</a></span><span class="op">(</span><span class="va">w_levels</span>, .problem <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of available variables for problem no. 1</span></span>
<span><span class="co">#&gt;  - Subject identifier (id)               : ID</span></span>
<span><span class="co">#&gt;  - Dependent variable (dv)               : DV</span></span>
<span><span class="co">#&gt;  - Independent variable (idv)            : TIME</span></span>
<span><span class="co">#&gt;  - Dose amount (amt)                     : AMT</span></span>
<span><span class="co">#&gt;  - Event identifier (evid)               : EVID</span></span>
<span><span class="co">#&gt;  - Model typical predictions (pred)      : PRED</span></span>
<span><span class="co">#&gt;  - Model individual predictions (ipred)  : IPRED</span></span>
<span><span class="co">#&gt;  - Model parameter (param)               : KA, CL, V, ALAG1</span></span>
<span><span class="co">#&gt;  - Eta (eta)                             : ETA1, ETA2, ETA3</span></span>
<span><span class="co">#&gt;  - Residuals (res)                       : CWRES, IWRES, RES, WRES</span></span>
<span><span class="co">#&gt;  - Categorical covariates (catcov)       : SEX [<span style="color: #BBBB00;">2</span>], MED1<span style="font-weight: bold;"> ('Digoxin')</span> [<span style="color: #BBBB00;">2</span>], MED2 [<span style="color: #BBBB00;">0</span>]</span></span>
<span><span class="co">#&gt;  - Continuous covariates (contcov)       : CLCR, AGE<span style="font-weight: bold;"> ('Age', yrs)</span>, WT</span></span>
<span><span class="co">#&gt;  - Compartment amounts (a)               : A1, A2</span></span>
<span><span class="co">#&gt;  - Not attributed (na)                   : DOSE, SS, II, TAD, CPRED</span></span></code></pre></div>
<p>Labels, units and levels also appear in new plotting functions. There
are some more complex functions where this renaming has not been
implemented, but the plan is to have it be universal eventually.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eta_vs_contcov.html">eta_vs_contcov</a></span><span class="op">(</span><span class="va">w_unit_labs</span>,etavar<span class="op">=</span><span class="va">ETA1</span>, quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="a01-the-xp_xtra-object_files/figure-html/plot_cont-1.png" width="576inches" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eta_vs_catcov.html">eta_vs_catcov</a></span><span class="op">(</span><span class="va">w_levels</span>,etavar<span class="op">=</span><span class="va">ETA1</span>, quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="a01-the-xp_xtra-object_files/figure-html/plot_cat-1.png" width="576inches" style="display: block; margin: auto;"></p>
<p>Note in the categorical plots, the number of individuals represented
by each category is underneath the value. This is similar to the
presentation in the package <a href="https://metrumresearchgroup.github.io/pmplots/" class="external-link"><code>pmplots</code></a>,
but uses the existing <code>xpose</code> framework. This option requires
the use of an <code>xp_xtra</code> object, and can be disabled with the
argument <code>show_n=FALSE</code>.</p>
</div>
<div class="section level3">
<h3 id="parameter-tables">Parameter tables<a class="anchor" aria-label="anchor" href="#parameter-tables"></a>
</h3>
<p>The <code><a href="../reference/get_prm.html">get_prm()</a></code> function in <code>xpose</code> has been
extended to output coefficient of variation percent (CV%) for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>ω</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\omega^2</annotation></semantics></math>
parameters and shrinkages where relevant.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_prm.html">get_prm</a></span><span class="op">(</span><span class="va">pheno_final</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">fixed</span>,<span class="va">m</span>,<span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Returning parameter estimates from $prob no.1, subprob no.1, method foce</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 9</span></span></span>
<span><span class="co">#&gt;   type  name       label       value         se      rse diagonal      cv    shk</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span> <span style="color: #949494; font-style: italic;">&lt;num:&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> the   THETA1     <span style="color: #949494;">"</span>CLpkg<span style="color: #949494;">"</span>  0.004<span style="text-decoration: underline;">813</span>  0.000<span style="text-decoration: underline;">236</span>5  0.049<span style="text-decoration: underline;">14</span> <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> the   THETA2     <span style="color: #949494;">"</span>Vpkg<span style="color: #949494;">"</span>   0.996<span style="text-decoration: underline;">4</span>    0.026<span style="text-decoration: underline;">42</span>    0.026<span style="text-decoration: underline;">52</span> <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> the   THETA3     <span style="color: #949494;">"</span>RUVADD<span style="color: #949494;">"</span> 2.784     0.251<span style="text-decoration: underline;">3</span>     0.090<span style="text-decoration: underline;">27</span> <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ome   OMEGA(1,1) <span style="color: #949494;">"</span>IIVCL<span style="color: #949494;">"</span>  0.200<span style="text-decoration: underline;">9</span>    0.051<span style="text-decoration: underline;">08</span>    0.254<span style="text-decoration: underline;">3</span>  TRUE       20.30   20.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ome   OMEGA(2,1) <span style="color: #949494;">""</span>       0.723<span style="text-decoration: underline;">6</span>    0.265<span style="text-decoration: underline;">4</span>     0.366<span style="text-decoration: underline;">8</span>  FALSE      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ome   OMEGA(2,2) <span style="color: #949494;">"</span>IIVV<span style="color: #949494;">"</span>   0.157<span style="text-decoration: underline;">6</span>    0.026<span style="text-decoration: underline;">14</span>    0.165<span style="text-decoration: underline;">9</span>  TRUE       15.86   11.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> sig   SIGMA(1,1) <span style="color: #949494;">""</span>       1        <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>       TRUE       <span style="color: #BB0000;">NA</span>      19.6</span></span></code></pre></div>
<p>There are a few options to change CV% where an opinion might conflict
with the default. One such option is to add a description of how the
parameter is used, which results in an exact CV% determined through
integration to be used. For example, if variability on the
weight-normalized clearance and volume of distribution parameters in one
of the example models was logit-normally distributed, it could be
described as follows.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pheno_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/add_prm_association.html">add_prm_association</a></span><span class="op">(</span><span class="va">CLpkg</span><span class="op">~</span><span class="fu">logit</span><span class="op">(</span><span class="va">IIVCL</span><span class="op">)</span>,<span class="va">Vpkg</span><span class="op">~</span><span class="fu">logit</span><span class="op">(</span><span class="va">IIVV</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="../reference/get_prm.html">get_prm</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">fixed</span>,<span class="va">m</span>,<span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Returning parameter estimates from $prob no.1, subprob no.1, method foce</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 9</span></span></span>
<span><span class="co">#&gt;   type  name       label       value         se      rse diagonal       cv   shk</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;num:4&gt;</span> <span style="color: #949494; font-style: italic;">&lt;num&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> the   THETA1     <span style="color: #949494;">"</span>CLpkg<span style="color: #949494;">"</span>  0.004<span style="text-decoration: underline;">813</span>  0.000<span style="text-decoration: underline;">236</span>5  0.049<span style="text-decoration: underline;">14</span> <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> the   THETA2     <span style="color: #949494;">"</span>Vpkg<span style="color: #949494;">"</span>   0.996<span style="text-decoration: underline;">4</span>    0.026<span style="text-decoration: underline;">42</span>    0.026<span style="text-decoration: underline;">52</span> <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> the   THETA3     <span style="color: #949494;">"</span>RUVADD<span style="color: #949494;">"</span> 2.784     0.251<span style="text-decoration: underline;">3</span>     0.090<span style="text-decoration: underline;">27</span> <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ome   OMEGA(1,1) <span style="color: #949494;">"</span>IIVCL<span style="color: #949494;">"</span>  0.200<span style="text-decoration: underline;">9</span>    0.051<span style="text-decoration: underline;">08</span>    0.254<span style="text-decoration: underline;">3</span>  TRUE     20.19     20.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ome   OMEGA(2,1) <span style="color: #949494;">""</span>       0.723<span style="text-decoration: underline;">6</span>    0.265<span style="text-decoration: underline;">4</span>     0.366<span style="text-decoration: underline;">8</span>  FALSE    <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ome   OMEGA(2,2) <span style="color: #949494;">"</span>IIVV<span style="color: #949494;">"</span>   0.157<span style="text-decoration: underline;">6</span>    0.026<span style="text-decoration: underline;">14</span>    0.165<span style="text-decoration: underline;">9</span>  TRUE      0.057<span style="text-decoration: underline;">78</span>  11.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> sig   SIGMA(1,1) <span style="color: #949494;">""</span>       1        <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>       TRUE     <span style="color: #BB0000;">NA</span>        19.6</span></span>
<span><span class="co">#&gt; <span style="color: #555555;"># Parameter table includes the following associations: </span><span style="color: #555555; font-weight: bold;">CLpkg~logit(IIVCL)</span><span style="color: #555555;"> and</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555; font-weight: bold;">Vpkg~logit(IIVV)</span></span></span></code></pre></div>
<p>There is a fair amount of complexity in the <code><a href="../reference/get_prm.html">get_prm()</a></code>
extensions, including ability to change parameter value while also
changing standard error and relevant variance-covariance (in position
for the <code>.cov</code> and <code>.cor</code> files). See
<code><a href="../reference/add_prm_association.html">?add_prm_association</a></code> and <code><a href="../reference/mutate_prm.html">?mutate_prm</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="cross-compatibility">Cross-compatibility<a class="anchor" aria-label="anchor" href="#cross-compatibility"></a>
</h2>
<p>In various warning messages, the <code>xp_xtras</code> object is
referred to as “cross-compatible”. This word choice is intended to
highlight that many functions developed for <code>xp_xtras</code>
objects will still work (perhaps with some diminished functionality) for
<code>xpose_data</code> objects, and that the inverse is of course
true.</p>
<p>Another way this cross-compatibility is maintained is via custom
themes. There may be <code>xpose</code> users concerned about adopting
<code>xpose.xtras</code> because with the new plot elements they would
have to declare new aesthetic defaults. Conveniently, the
<code>xp_xtra</code> theme is derived in a way such that aesthetics for
defined plot elements are re-used for similar new elements, meaning
there is less (if any) updates needed to use a custom theme beyond using
something like the following.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">favorite_theme</span> <span class="op">&lt;-</span> <span class="fu">xpose</span><span class="fu">::</span><span class="fu"><a href="https://uupharmacometrics.github.io/xpose/reference/xp_themes.html" class="external-link">theme_xp_xpose4</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># stand-in for "custom" theme</span></span>
<span></span>
<span><span class="fu"><a href="../reference/eta_vs_catcov.html">eta_vs_catcov</a></span><span class="op">(</span><span class="va">w_levels</span>,etavar<span class="op">=</span><span class="va">ETA1</span>, quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="a01-the-xp_xtra-object_files/figure-html/xp_themes-1.png" width="576inches" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eta_vs_catcov.html">eta_vs_catcov</a></span><span class="op">(</span><span class="va">w_levels</span>,etavar<span class="op">=</span><span class="va">ETA1</span>, quiet<span class="op">=</span><span class="cn">TRUE</span>, xp_theme <span class="op">=</span> <span class="va">favorite_theme</span><span class="op">)</span></span></code></pre></div>
<p><img src="a01-the-xp_xtra-object_files/figure-html/xp_themes-2.png" width="576inches" style="display: block; margin: auto;"></p>
<p>Note that worked even though <code>boxplot_fill</code> is not defined
in the <code><a href="https://uupharmacometrics.github.io/xpose/reference/xp_themes.html" class="external-link">xpose::theme_xp_xpose4()</a></code>. To update an existing
theme object to one for the extension package (instead of using the old
theme in the <code>xp_theme</code> argument), simply use
<code>updated_theme &lt;- xp_xtra_theme(old_theme)</code>.</p>
</div>
<div class="section level2">
<h2 id="convenience">Convenience<a class="anchor" aria-label="anchor" href="#convenience"></a>
</h2>
<p><code>xpose</code> has a collection of getter and setter functions to
interact with parts of an <code>xpose_data</code> object, but these tend
to be lower level and not exported. To add this convenience and make it
user-friendly, a few functions have been added.</p>
<p>Properties from a model summary can now be pulled without using
<code><a href="https://uupharmacometrics.github.io/xpose/reference/get_summary.html" class="external-link">xpose::get_summary()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pheno_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/get_shk.html">get_shk</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 20.1 11.6</span></span>
<span><span class="va">pheno_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/get_shk.html">get_shk</a></span><span class="op">(</span><span class="st">"eps"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 19.6</span></span>
<span><span class="va">pheno_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/get_prop.html">get_prop</a></span><span class="op">(</span><span class="st">"ofv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "587.918"</span></span>
<span><span class="va">pheno_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/get_prop.html">get_prop</a></span><span class="op">(</span><span class="st">"descr"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "na"</span></span></code></pre></div>
<p><code>xpose</code> has certain expectations around how model
descriptions are included in model code. At time of writing, it is
expected the format is something like “; 2. Description: (text)”. To add
some flexibility, users can either use <code><a href="../reference/set_prop.html">set_prop()</a></code> to change
description directly, or pull it from a more generic scan of the model
code comments using <code><a href="../reference/desc_from_comments.html">desc_from_comments()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pheno_final</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/desc_from_comments.html">desc_from_comments</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/get_prop.html">get_prop</a></span><span class="op">(</span><span class="st">"descr"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Reparameterized final model"</span></span></code></pre></div>
<p>It can be helpful to add information to the model data that is
available elsewhere in the <code>xpose_data</code> object, such as
individual objective functions. Currently, those can be added using
<code><a href="../reference/backfill_iofv.html">backfill_iofv()</a></code>, which is most often used in the context of
<code>xpose_set</code> objects. Theoretically more backfill functions
can be made available.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Prybylski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
