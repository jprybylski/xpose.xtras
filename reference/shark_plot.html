<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Individual contributions to dOFV — shark_plot • xpose.xtras</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Individual contributions to dOFV — shark_plot"><meta name="description" content="This is intended to match the overall behavior of
dOFV.vs.id() in xpose4, within the framework
of the xpose_set object.
dofv_vs_id is an alias of the function shark_plot,
for recognition."><meta property="og:description" content="This is intended to match the overall behavior of
dOFV.vs.id() in xpose4, within the framework
of the xpose_set object.
dofv_vs_id is an alias of the function shark_plot,
for recognition."><meta property="og:image" content="https://jprybylski.github.io/xpose.xtras/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xpose.xtras</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a01-the-xp_xtra-object.html">The extended xpose data object</a></li>
    <li><a class="dropdown-item" href="../articles/a02-xpose-sets.html">Using xpose sets</a></li>
    <li><a class="dropdown-item" href="../articles/a03-useful_plots.html">Useful uncommon plots</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jprybylski/xpose.xtras/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Individual contributions to dOFV</h1>
      <small class="dont-index">Source: <a href="https://github.com/jprybylski/xpose.xtras/blob/master/R/xset_shark.R" class="external-link"><code>R/xset_shark.R</code></a></small>
      <div class="d-none name"><code>shark_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is intended to match the overall behavior of
<code>dOFV.vs.id()</code> in <code>xpose4</code>, within the framework
of the <code>xpose_set</code> object.</p>
<p><code>dofv_vs_id</code> is an alias of the function <code>shark_plot</code>,
for recognition.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">shark_plot</span><span class="op">(</span></span>
<span>  <span class="va">xpdb_s</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .inorder <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"plt"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  df <span class="op">=</span> <span class="st">"guess"</span>,</span>
<span>  text_cutoff <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Individual contributions to dOFV | @run"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Based on @nind individuals, OFVs: @ofv"</span>,</span>
<span>  caption <span class="op">=</span> <span class="st">"@dir"</span>,</span>
<span>  tag <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"dOFV"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Number of individuals removed"</span>,</span>
<span>  <span class="va">opt</span>,</span>
<span>  facets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">.problem</span>,</span>
<span>  <span class="va">.subprob</span>,</span>
<span>  <span class="va">.method</span>,</span>
<span>  <span class="va">quiet</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dofv_vs_id</span><span class="op">(</span></span>
<span>  <span class="va">xpdb_s</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .inorder <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"plt"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  df <span class="op">=</span> <span class="st">"guess"</span>,</span>
<span>  text_cutoff <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Individual contributions to dOFV | @run"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Based on @nind individuals, OFVs: @ofv"</span>,</span>
<span>  caption <span class="op">=</span> <span class="st">"@dir"</span>,</span>
<span>  tag <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"dOFV"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Number of individuals removed"</span>,</span>
<span>  <span class="va">opt</span>,</span>
<span>  facets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">.problem</span>,</span>
<span>  <span class="va">.subprob</span>,</span>
<span>  <span class="va">.method</span>,</span>
<span>  <span class="va">quiet</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-xpdb-s">xpdb_s<a class="anchor" aria-label="anchor" href="#arg-xpdb-s"></a></dt>
<dd><p>&lt;<code>xpose_set</code>&gt; object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>See &lt;<code><a href="two_set_dots.html">two_set_dots</a></code>&gt;</p></dd>


<dt id="arg--inorder">.inorder<a class="anchor" aria-label="anchor" href="#arg--inorder"></a></dt>
<dd><p>See &lt;<code><a href="two_set_dots.html">two_set_dots</a></code>&gt;</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>See Details.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>alpha for LRT</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>degrees of freedom for LRT. If <code>"guess"</code> (default), then
use the difference in the number of unfixed parameters.</p></dd>


<dt id="arg-text-cutoff">text_cutoff<a class="anchor" aria-label="anchor" href="#arg-text-cutoff"></a></dt>
<dd><p>If less than 1, the percentile of absolute
individual dOFV values above which to show labels of IDs.
If above 1, the absolute number of IDs to show. To show all,
use an extreme positive number like 9999.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Plot title</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Plot subtitle</p></dd>


<dt id="arg-caption">caption<a class="anchor" aria-label="anchor" href="#arg-caption"></a></dt>
<dd><p>Plot caption</p></dd>


<dt id="arg-tag">tag<a class="anchor" aria-label="anchor" href="#arg-tag"></a></dt>
<dd><p>Plot tag</p></dd>


<dt id="arg-ylab">ylab<a class="anchor" aria-label="anchor" href="#arg-ylab"></a></dt>
<dd><p>y-axis label</p></dd>


<dt id="arg-xlab">xlab<a class="anchor" aria-label="anchor" href="#arg-xlab"></a></dt>
<dd><p>x-axis label</p></dd>


<dt id="arg-opt">opt<a class="anchor" aria-label="anchor" href="#arg-opt"></a></dt>
<dd><p>User-specified data options. Only some of these
will be used.</p></dd>


<dt id="arg-facets">facets<a class="anchor" aria-label="anchor" href="#arg-facets"></a></dt>
<dd><p>&lt;<code>character</code>&gt; vector selecting facets, or <code>NULL</code> (default).</p></dd>


<dt id="arg--problem">.problem<a class="anchor" aria-label="anchor" href="#arg--problem"></a></dt>
<dd><p>The problem to be used, by default returns the last one.</p></dd>


<dt id="arg--subprob">.subprob<a class="anchor" aria-label="anchor" href="#arg--subprob"></a></dt>
<dd><p>The subproblem to be used, by default returns the last one.</p></dd>


<dt id="arg--method">.method<a class="anchor" aria-label="anchor" href="#arg--method"></a></dt>
<dd><p>The estimation method to be used, by default returns the last one.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Silence extra debugging output</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>&lt;<code>xpose_plot</code>&gt; object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For type-based customization of plots:</p><ul><li><p><code>p</code> points (using aesthetics for <code>sharkup</code> and <code>sharkdn</code>)</p></li>
<li><p><code>l</code> lines for dOFV (both total dOFV and significance are plotted)</p></li>
<li><p><code>t</code> text (using aesthetics for <code>shkuptxt</code> and <code>shkdntxt</code>)</p></li>
</ul><p>In <code>xpose4</code>, users can control <code>sig.drop</code>, but this function uses
<code>alpha</code> and <code>df</code> to determine the critical delta by the likelihood
ratio test. It is acknowledged there are situations where this may
not be valid, but it is suggested that <code>df</code> or <code>alpha</code> be adjusted
to meet the desired <code>sig.drop</code>.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">my_alpha</span> <span class="op">&lt;-</span> <span class="fl">0.05</span></span>
<span><span class="va">my_df</span> <span class="op">&lt;-</span> <span class="fl">1.34</span> <span class="co"># fractional, perhaps to account for different IIVs</span></span>
<span></span>
<span><span class="va">my_sigdrop</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Chisquare.html" class="external-link">qchisq</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">my_alpha</span>, <span class="va">my_df</span><span class="op">)</span></span>
<span><span class="va">my_sigdrop</span></span>
<span><span class="co">#&gt; [1] -4.633671</span></span>
<span><span class="co"># Then use alpha=my_alpha, df=my_df in `shark_plot` call.</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="shark_colors.html">shark_colors()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pheno_set</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Make sure set has iofv var types defined</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="focus_xpdb.html">focus_xpdb</a></span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="focus_xpdb.html">focus_function</a></span><span class="op">(</span><span class="va">backfill_iofv</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Pick two models or consistent with two_set_dots()</span></span></span>
<span class="r-in"><span>  <span class="fu">shark_plot</span><span class="op">(</span><span class="va">run6</span>,<span class="va">run11</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removing duplicated rows based on: ID</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Returning parameter estimates from $prob no.1, subprob no.1, method foce</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Returning parameter estimates from $prob no.1, subprob no.1, method foce</span>
<span class="r-plt img"><img src="shark_plot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pheno_set</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># As before</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="focus_xpdb.html">focus_xpdb</a></span><span class="op">(</span><span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="focus_xpdb.html">focus_function</a></span><span class="op">(</span><span class="va">backfill_iofv</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Add indicator (or use established covariate)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>APGRtest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">APGR</span><span class="op">)</span><span class="op">)</span><span class="op">&lt;</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Pick two models or consistent with two_set_dots()</span></span></span>
<span class="r-in"><span>  <span class="fu">shark_plot</span><span class="op">(</span><span class="va">run6</span>,<span class="va">run11</span>, facets <span class="op">=</span> <span class="st">"APGRtest"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removing duplicated rows based on: ID, APGRtest</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Returning parameter estimates from $prob no.1, subprob no.1, method foce</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Returning parameter estimates from $prob no.1, subprob no.1, method foce</span>
<span class="r-plt img"><img src="shark_plot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Prybylski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

