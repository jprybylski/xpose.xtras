<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Transform parameter values in place — mutate_prm • xpose.xtras</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transform parameter values in place — mutate_prm"><meta name="description" content="Apply transformations to fitted parameter values.
As fitted, sometimes parameter values are not as easy to communicate, but
to transform them outside of the xpose ecosystem limits some available
features. To have the best experience, this function can update the
parameter values that are used by xpose get_prm functions. At this
time these transformations are not applied to param vars (list_vars), but that can
already be done with the mutate method.
This only works for theta parameters.
All valid mutations are applied sequentially, so a double call to the2~the2^3
will result in effectively the2~the2^9, for example.
RSE values are calculated at runtime within get_prm, so they are not updated (or
updatable) with this function."><meta property="og:description" content="Apply transformations to fitted parameter values.
As fitted, sometimes parameter values are not as easy to communicate, but
to transform them outside of the xpose ecosystem limits some available
features. To have the best experience, this function can update the
parameter values that are used by xpose get_prm functions. At this
time these transformations are not applied to param vars (list_vars), but that can
already be done with the mutate method.
This only works for theta parameters.
All valid mutations are applied sequentially, so a double call to the2~the2^3
will result in effectively the2~the2^9, for example.
RSE values are calculated at runtime within get_prm, so they are not updated (or
updatable) with this function."><meta property="og:image" content="https://jprybylski.github.io/xpose.xtras/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xpose.xtras</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a01-the-xp_xtra-object.html">The extended xpose data object</a></li>
    <li><a class="dropdown-item" href="../articles/a02-xpose-sets.html">Using xpose sets</a></li>
    <li><a class="dropdown-item" href="../articles/a03-useful_plots.html">Useful uncommon plots</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jprybylski/xpose.xtras/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Transform parameter values in place</h1>
      <small class="dont-index">Source: <a href="https://github.com/jprybylski/xpose.xtras/blob/master/R/xtra_pars.R" class="external-link"><code>R/xtra_pars.R</code></a></small>
      <div class="d-none name"><code>mutate_prm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Apply transformations to fitted parameter values.</p>
<p>As fitted, sometimes parameter values are not as easy to communicate, but
to transform them outside of the <code>xpose</code> ecosystem limits some available
features. To have the best experience, this function can update the
parameter values that are used by <code>xpose</code> <code>get_prm</code> functions. At this
time these transformations are not applied to <code>param</code> vars (<code><a href="list_vars.html">list_vars</a></code>), but that can
already be done with the <code>mutate</code> method.</p>
<p>This only works for theta parameters.</p>
<p>All valid mutations are applied sequentially, so a double call to <code>the2~the2^3</code>
will result in effectively <code>the2~the2^9</code>, for example.</p>
<p>RSE values are calculated at runtime within <code>get_prm</code>, so they are not updated (or
updatable) with this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mutate_prm</span><span class="op">(</span></span>
<span>  <span class="va">xpdb</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .autose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .problem <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .subprob <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .sesim <span class="op">=</span> <span class="fl">1e+05</span>,</span>
<span>  <span class="va">quiet</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-xpdb">xpdb<a class="anchor" aria-label="anchor" href="#arg-xpdb"></a></dt>
<dd><p>&lt;<code>xp_xtras</code>&gt; object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>... &lt;<code><a href="https://rlang.r-lib.org/reference/dyn-dots.html" class="external-link">dynamic-dots</a></code>&gt; One or more formulae that
define transformations to parameters. RHS of formulas can be function or a
value. That value can be a function call like in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> (<code>the1~exp(the1)</code>).</p></dd>


<dt id="arg--autose">.autose<a class="anchor" aria-label="anchor" href="#arg--autose"></a></dt>
<dd><p>&lt;<code>logical</code>&gt; If a function is used for the transform then simulation
is used to transform the current SE to a new SE. Precision of this transformation
is dependent on <code>.sesim</code>. If parameter values are not assigned with a function,
this option will simply scale SE to maintain the same RSE. See Details.</p></dd>


<dt id="arg--problem">.problem<a class="anchor" aria-label="anchor" href="#arg--problem"></a></dt>
<dd><p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p></dd>


<dt id="arg--subprob">.subprob<a class="anchor" aria-label="anchor" href="#arg--subprob"></a></dt>
<dd><p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p></dd>


<dt id="arg--method">.method<a class="anchor" aria-label="anchor" href="#arg--method"></a></dt>
<dd><p>&lt;<code>numeric</code>&gt; Problem number to apply this relationship.</p></dd>


<dt id="arg--sesim">.sesim<a class="anchor" aria-label="anchor" href="#arg--sesim"></a></dt>
<dd><p>&lt;<code>numeric</code>&gt; Length of simulated <code>rnorm</code> vector for <code>.autose</code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Silence extra output.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="important-points-about-covariance-and-correlation">Important points about covariance and correlation<a class="anchor" aria-label="anchor" href="#important-points-about-covariance-and-correlation"></a></h3>


<p>Covariance and correlation parameters are adjusted when standard error (SE)
values are changed directly or with <code>.autose</code>. When a transformation is applied
as a function for the fixed effect parameter (eg, <code>~plogis</code>), the resulting SE may have
an unexpected scale; this is because it is now reporting the standard deviation
of a transformed and potentially non-normal distribution. If the parameter were fit
in the transformed scale (constrained to any appropriate bounds), it would likely have a
different SE given that most covariance estimation methods (excluding non-parametric and
resampling-based) will treat the constrained parameter as continuous and unconstrained.</p>
<p>The updates to variance-covariance values (and the correlation values, though that is mostly
invariant) are applied to the entire matrices. When piped directly into
<code>get_prm</code>, only the SE estimate is shown, but &lt;<code><a href="https://uupharmacometrics.github.io/xpose/reference/get_file.html" class="external-link">get_file</a></code>&gt; can be used
to see the complete updated variance-covariance values. This could be useful if those
matrices are being used to define priors for a Bayesian model fitting, as the re-scaling
of off-diagonal elements is handled automatically.</p>
<p>A function to transform parameters will result in a more accurate <code>autose</code> result. If a call
(<code>the1~exp(the)</code>) or a value (<code>the1~2</code>) are used, the standard error will be simply scaled.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">vismo_pomod</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Function</span></span></span>
<span class="r-in"><span>  <span class="fu">mutate_prm</span><span class="op">(</span><span class="va">THETA11</span><span class="op">~</span><span class="va">exp</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Value (se will not be scaled); plogis = inverse logit</span></span></span>
<span class="r-in"><span>  <span class="fu">mutate_prm</span><span class="op">(</span><span class="va">THETA12</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="va">THETA12</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="get_prm.html">get_prm</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Since a function was not provided, `autose` will be scaled to maintain the same</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> RSE.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Returning parameter estimates from $prob no.1, subprob no.1, method lce</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>[$prob no.1, subprob no.1, lce] $SIGMA labels did not match the number of SIGMAs in the `.ext` file.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Shrinkage missing for <span style="color: #BB00BB;">sigma</span> estimates, if any are modeled. Using NA in this</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> table.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 16 × 12</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    type  name    label   value       se     rse fixed diagonal     m     n    cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;num:3&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;num:3&gt;</span> <span style="color: #949494; font-style: italic;">&lt;num:3&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;num&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> the   THETA1  <span style="color: #949494;">"</span>THE…  7.19   <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           1    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> the   THETA2  <span style="color: #949494;">"</span>THE…  4.06   <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           2    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> the   THETA3  <span style="color: #949494;">"</span>THE… -<span style="color: #BB0000;">2.88</span>   <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           3    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> the   THETA4  <span style="color: #949494;">"</span>THE…  2.2    <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           4    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> the   THETA5  <span style="color: #949494;">"</span>THE…  0.671  <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           5    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> the   THETA6  <span style="color: #949494;">"</span>THE… -<span style="color: #BB0000;">1.06</span>   <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           6    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> the   THETA7  <span style="color: #949494;">"</span>THE…  0.881  <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           7    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> the   THETA8  <span style="color: #949494;">"</span>THE… -<span style="color: #BB0000;">0.602</span>  <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           8    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> the   THETA9  <span style="color: #949494;">"</span>THE… -<span style="color: #BB0000;">0.527</span>  <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>           9    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> the   THETA10 <span style="color: #949494;">"</span>THE…  0.66   <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  <span style="color: #BB0000;">NA</span>          10    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> the   THETA11 <span style="color: #949494;">"</span>LOG…  0.033<span style="text-decoration: underline;">3</span>  1.5 <span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span>  0.045<span style="text-decoration: underline;">1</span> FALSE <span style="color: #BB0000;">NA</span>          11    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> the   THETA12 <span style="color: #949494;">"</span>THE…  0.015<span style="text-decoration: underline;">7</span>  7.27<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span>  0.046<span style="text-decoration: underline;">3</span> FALSE <span style="color: #BB0000;">NA</span>          12    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> the   THETA13 <span style="color: #949494;">"</span>THE… -<span style="color: #BB0000;">4.35</span>    2.75<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span>  0.063<span style="text-decoration: underline;">1</span> FALSE <span style="color: #BB0000;">NA</span>          13    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">14</span> the   THETA14 <span style="color: #949494;">"</span>THE… 21.9     2.44<span style="color: #949494;">e</span>+0  0.111  FALSE <span style="color: #BB0000;">NA</span>          14    <span style="color: #BB0000;">NA</span>  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">15</span> ome   OMEGA(… <span style="color: #949494;">"</span>ETA…  0.639   8.16<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span>  0.128  FALSE TRUE         1     1  71.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">16</span> sig   SIGMA(… <span style="color: #949494;">""</span>     0      <span style="color: #BB0000;">NA</span>   <span style="color: #949494;"> </span>   <span style="color: #BB0000;">NA</span>      TRUE  TRUE         1     1  <span style="color: #BB0000;">NA</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: shk &lt;num:3&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Prybylski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

