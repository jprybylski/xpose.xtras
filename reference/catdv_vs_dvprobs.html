<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Non-simulation based likelihood model diagnostic — catdv_vs_dvprobs • xpose.xtras</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Non-simulation based likelihood model diagnostic — catdv_vs_dvprobs"><meta name="description" content='These plots attempt to provide a means of verifying that the
estimated likelihoods and probabilities for categorical outcomes
are captured within the model.
When the smooth spline is included (type includes "s"), it is
expected that the overall trend is up and to the right; a relatively
flat trend suggests that the modeled likelihood is inconsistent with the
observed outcome.'><meta property="og:description" content='These plots attempt to provide a means of verifying that the
estimated likelihoods and probabilities for categorical outcomes
are captured within the model.
When the smooth spline is included (type includes "s"), it is
expected that the overall trend is up and to the right; a relatively
flat trend suggests that the modeled likelihood is inconsistent with the
observed outcome.'><meta property="og:image" content="https://jprybylski.github.io/xpose.xtras/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xpose.xtras</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a01-the-xp_xtra-object.html">The extended xpose data object</a></li>
    <li><a class="dropdown-item" href="../articles/a02-xpose-sets.html">Using xpose sets</a></li>
    <li><a class="dropdown-item" href="../articles/a03-useful_plots.html">Useful uncommon plots</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jprybylski/xpose.xtras/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Non-simulation based likelihood model diagnostic</h1>
      <small class="dont-index">Source: <a href="https://github.com/jprybylski/xpose.xtras/blob/master/R/categorical.R" class="external-link"><code>R/categorical.R</code></a></small>
      <div class="d-none name"><code>catdv_vs_dvprobs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These plots attempt to provide a means of verifying that the
estimated likelihoods and probabilities for categorical outcomes
are captured within the model.</p>
<p>When the smooth spline is included (<code>type</code> includes <code>"s"</code>), it is
expected that the overall trend is up and to the right; a relatively
flat trend suggests that the modeled likelihood is inconsistent with the
observed outcome.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">catdv_vs_dvprobs</span><span class="op">(</span></span>
<span>  <span class="va">xpdb</span>,</span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cutpoint <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"vbs"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"@y vs. @x | @run"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Ofv: @ofv, Number of individuals: @nind"</span>,</span>
<span>  caption <span class="op">=</span> <span class="st">"@dir"</span>,</span>
<span>  tag <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xlab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"probability"</span>, <span class="st">"basic"</span><span class="op">)</span>,</span>
<span>  <span class="va">facets</span>,</span>
<span>  <span class="va">.problem</span>,</span>
<span>  <span class="va">quiet</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-xpdb">xpdb<a class="anchor" aria-label="anchor" href="#arg-xpdb"></a></dt>
<dd><p>&lt;<code>xp_xtras</code>&gt; or &lt;<code>xpose_data</code>&gt; object</p></dd>


<dt id="arg-mapping">mapping<a class="anchor" aria-label="anchor" href="#arg-mapping"></a></dt>
<dd><p><code>ggplot2</code> style mapping</p></dd>


<dt id="arg-cutpoint">cutpoint<a class="anchor" aria-label="anchor" href="#arg-cutpoint"></a></dt>
<dd><p>&lt;<code>numeric</code>&gt; Of defined probabilities, which one to
use in plots.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>See Details.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Plot title</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Plot subtitle</p></dd>


<dt id="arg-caption">caption<a class="anchor" aria-label="anchor" href="#arg-caption"></a></dt>
<dd><p>Plot caption</p></dd>


<dt id="arg-tag">tag<a class="anchor" aria-label="anchor" href="#arg-tag"></a></dt>
<dd><p>Plot tag</p></dd>


<dt id="arg-xlab">xlab<a class="anchor" aria-label="anchor" href="#arg-xlab"></a></dt>
<dd><p>Either use the typical basic x-axis label (the cutpoint-defined
column name) or label it based on the probability/likelihood it is estimating.</p></dd>


<dt id="arg-facets">facets<a class="anchor" aria-label="anchor" href="#arg-facets"></a></dt>
<dd><p>Additional facets</p></dd>


<dt id="arg--problem">.problem<a class="anchor" aria-label="anchor" href="#arg--problem"></a></dt>
<dd><p>Problem number</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Silence extra debugging output</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Any additional aesthetics.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The desired plot</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Test M3 model</span></span></span>
<span class="r-in"><span><span class="va">pkpd_m3</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Need to ensure var types are set</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_var_types.html">set_var_types</a></span><span class="op">(</span>catdv<span class="op">=</span><span class="va">BLQ</span>,dvprobs<span class="op">=</span><span class="va">LIKE</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Set probs</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_dv_probs.html">set_dv_probs</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">~</span><span class="va">LIKE</span>, .dv_var <span class="op">=</span> <span class="va">BLQ</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Optional, but useful to set levels</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_var_levels.html">set_var_levels</a></span><span class="op">(</span><span class="fl">1</span>, BLQ <span class="op">=</span> <span class="fu"><a href="levelers.html">lvl_bin</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="co"># Plot with basic xlab makes no assumptions</span></span></span>
<span class="r-in"><span>  <span class="fu">catdv_vs_dvprobs</span><span class="op">(</span>xlab <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering data by EVID == 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-plt img"><img src="catdv_vs_dvprobs-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test categorical model</span></span></span>
<span class="r-in"><span><span class="va">vismo_xpdb</span> <span class="op">&lt;-</span> <span class="va">vismo_pomod</span>  <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_var_types.html">set_var_types</a></span><span class="op">(</span>.problem<span class="op">=</span><span class="fl">1</span>, catdv<span class="op">=</span><span class="va">DV</span>, dvprobs<span class="op">=</span><span class="fu">matches</span><span class="op">(</span><span class="st">"^P\\d+$"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_dv_probs.html">set_dv_probs</a></span><span class="op">(</span>.problem<span class="op">=</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">~</span><span class="va">P0</span>,<span class="fl">1</span><span class="op">~</span><span class="va">P1</span>,<span class="fu">ge</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">~</span><span class="va">P23</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Various cutpoints (note axes labels and texts)</span></span></span>
<span class="r-in"><span><span class="va">vismo_xpdb</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">catdv_vs_dvprobs</span><span class="op">(</span>xlab <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering data by EVID == 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-plt img"><img src="catdv_vs_dvprobs-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">vismo_xpdb</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">catdv_vs_dvprobs</span><span class="op">(</span>cutpoint <span class="op">=</span> <span class="fl">2</span>, xlab <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering data by EVID == 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-plt img"><img src="catdv_vs_dvprobs-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">vismo_xpdb</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">catdv_vs_dvprobs</span><span class="op">(</span>cutpoint <span class="op">=</span> <span class="fl">3</span>, xlab <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering data by EVID == 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-plt img"><img src="catdv_vs_dvprobs-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Latter is arguably clearer with default xlab</span></span></span>
<span class="r-in"><span><span class="va">vismo_xpdb</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">catdv_vs_dvprobs</span><span class="op">(</span>cutpoint <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using data from $prob no.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering data by EVID == 0</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = "cs")'</span>
<span class="r-plt img"><img src="catdv_vs_dvprobs-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Prybylski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

